package prak9.GradleTest

plugins {
    id 'java'
}

group = 'com.ldf'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation platform('org.junit:junit-bom:5.9.1')
    testImplementation 'org.junit.jupiter:junit-jupiter'
}

test {
    useJUnitPlatform()
}

jar {
    manifest {
        attributes(
                'Main-Class': 'com.ldf.Main'
        )
    }
}

tasks.withType(JavaCompile) {
    options.compilerArgs.addAll(['--release', '11'])
}


task copyJarToDockerDir(type: Copy) {
    from jar
    into 'docker/build/libs'
    eachFile { details ->
        details.path = "GradleTest-1.0-SNAPSHOT.jar"
    }
}



task buildDocker(type: Exec) {
    dependsOn copyJarToDockerDir
    commandLine 'docker', 'build', '-t', 'dockerprak9', 'docker'
    workingDir project.file('C:/Users/main/IdeaProjects/GradleTest')
}

task runDocker(type: Exec) {
    dependsOn buildDocker
    commandLine 'docker', 'run', 'dockerprak9'
    workingDir project.file('C:/Users/main/IdeaProjects/GradleTest')
}





